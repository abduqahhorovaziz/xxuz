<?php /* Smarty version Smarty-3.1.14, created on 2022-04-01 10:14:47
         compiled from "/home/miricouz/xx.uz/wa-apps/shop/templates/actions/frontend/order/form/shipping.html" */ ?>
<?php /*%%SmartyHeaderCode:119348072262468a47a4df75-37258870%%*/if(!defined('SMARTY_DIR')) exit('no direct access allowed');
$_valid = $_smarty_tpl->decodeProperties(array (
  'file_dependency' => 
  array (
    'fb15b6a7f8c1a656a0684172a60268a20f5eaaca' => 
    array (
      0 => '/home/miricouz/xx.uz/wa-apps/shop/templates/actions/frontend/order/form/shipping.html',
      1 => 1626346255,
      2 => 'file',
    ),
  ),
  'nocache_hash' => '119348072262468a47a4df75-37258870',
  'function' => 
  array (
  ),
  'variables' => 
  array (
    'error_step_id' => 0,
    'errors' => 0,
    '_errors' => 0,
    '_error' => 0,
    'config' => 0,
    '_is_default_mode' => 0,
    'shipping' => 0,
    '_hide_shipping' => 0,
    '_possible_address' => 0,
    '_types_sort' => 0,
    '_type_id' => 0,
    '_type' => 0,
    '_price' => 0,
    '_is_active' => 0,
    '_date' => 0,
    '_active_type' => 0,
    '_active_variant' => 0,
    '_variant' => 0,
    '_map_display' => 0,
    '_variants_count' => 0,
    '_is_minimal_mode' => 0,
    '_is_active_type' => 0,
    '_variants' => 0,
    '_is_fast_render' => 0,
    '_error_text' => 0,
    'event_hook' => 0,
    '_' => 0,
    '_api_uri' => 0,
    '_map' => 0,
    '_variant_first' => 0,
    'wa' => 0,
  ),
  'has_nocache_code' => false,
  'version' => 'Smarty-3.1.14',
  'unifunc' => 'content_62468a47bedcf0_15168379',
),false); /*/%%SmartyHeaderCode%%*/?>
<?php if ($_valid && !is_callable('content_62468a47bedcf0_15168379')) {function content_62468a47bedcf0_15168379($_smarty_tpl) {?><?php if (!is_callable('smarty_modifier_wa_datetime')) include '/home/miricouz/xx.uz/wa-system/vendors/smarty-plugins/modifier.wa_datetime.php';
?><?php $_smarty_tpl->tpl_vars['_errors'] = new Smarty_variable(array(), null, 0);?><?php if (!empty($_smarty_tpl->tpl_vars['error_step_id']->value)&&$_smarty_tpl->tpl_vars['error_step_id']->value==="shipping"){?><?php $_smarty_tpl->tpl_vars['_errors'] = new Smarty_variable($_smarty_tpl->tpl_vars['errors']->value, null, 0);?><?php }?><?php $_smarty_tpl->tpl_vars['_error_text'] = new Smarty_variable(null, null, 0);?><?php $_smarty_tpl->tpl_vars['_is_fast_render'] = new Smarty_variable(false, null, 0);?><?php if (!empty($_smarty_tpl->tpl_vars['_errors']->value)){?><?php  $_smarty_tpl->tpl_vars['_error'] = new Smarty_Variable; $_smarty_tpl->tpl_vars['_error']->_loop = false;
 $_from = $_smarty_tpl->tpl_vars['_errors']->value; if (!is_array($_from) && !is_object($_from)) { settype($_from, 'array');}
foreach ($_from as $_smarty_tpl->tpl_vars['_error']->key => $_smarty_tpl->tpl_vars['_error']->value){
$_smarty_tpl->tpl_vars['_error']->_loop = true;
?><?php if (!empty($_smarty_tpl->tpl_vars['_error']->value["fast_render"])){?><?php $_smarty_tpl->tpl_vars['_is_fast_render'] = new Smarty_variable(true, null, 0);?><?php break 1?><?php }?><?php } ?><?php }?><?php $_smarty_tpl->tpl_vars['_types_sort'] = new Smarty_variable(array("todoor","pickup","post"), null, 0);?><?php $_smarty_tpl->tpl_vars['_is_default_mode'] = new Smarty_variable(false, null, 0);?><?php $_smarty_tpl->tpl_vars['_is_minimal_mode'] = new Smarty_variable(true, null, 0);?><?php if ($_smarty_tpl->tpl_vars['config']->value['order']['show_pickuppoint_map']===shopCheckoutConfig::PICKUPPOINT_MAP_TYPE_ALWAYS){?><?php $_smarty_tpl->tpl_vars['_is_default_mode'] = new Smarty_variable(true, null, 0);?><?php $_smarty_tpl->tpl_vars['_is_minimal_mode'] = new Smarty_variable(false, null, 0);?><?php }elseif($_smarty_tpl->tpl_vars['config']->value['order']['show_pickuppoint_map']===shopCheckoutConfig::PICKUPPOINT_MAP_TYPE_EXCEPT_GADGETS){?><?php $_smarty_tpl->tpl_vars['_is_default_mode'] = new Smarty_variable(true, null, 0);?><?php $_smarty_tpl->tpl_vars['_is_minimal_mode'] = new Smarty_variable(false, null, 0);?><?php }?><?php $_smarty_tpl->tpl_vars['_map_display'] = new Smarty_variable("none", null, 0);?><?php if (!empty($_smarty_tpl->tpl_vars['_is_default_mode']->value)&&!empty($_smarty_tpl->tpl_vars['shipping']->value['selected_type_id'])&&$_smarty_tpl->tpl_vars['shipping']->value['selected_type_id']=="pickup"){?><?php if ($_smarty_tpl->tpl_vars['config']->value['order']['show_pickuppoint_map']===shopCheckoutConfig::PICKUPPOINT_MAP_TYPE_ALWAYS){?><?php $_smarty_tpl->tpl_vars['_map_display'] = new Smarty_variable("always", null, 0);?><?php }elseif($_smarty_tpl->tpl_vars['config']->value['order']['show_pickuppoint_map']===shopCheckoutConfig::PICKUPPOINT_MAP_TYPE_EXCEPT_GADGETS){?><?php $_smarty_tpl->tpl_vars['_map_display'] = new Smarty_variable("desktop", null, 0);?><?php }?><?php }?><?php $_smarty_tpl->tpl_vars['_variant_first'] = new Smarty_variable(null, null, 0);?><?php $_smarty_tpl->tpl_vars['_variants_count'] = new Smarty_variable(0, null, 0);?><?php $_smarty_tpl->tpl_vars['_hide_shipping'] = new Smarty_variable(!empty($_smarty_tpl->tpl_vars['shipping']->value['disabled'])||(empty($_smarty_tpl->tpl_vars['shipping']->value['types'])&&empty($_smarty_tpl->tpl_vars['_errors']->value)), null, 0);?><section class="wa-step-section wa-step-shipping-section" id="wa-step-shipping-section" style="<?php if (!empty($_smarty_tpl->tpl_vars['_hide_shipping']->value)){?>display: none;<?php }?>"><div class="wa-section-body"><form><?php if (!empty($_smarty_tpl->tpl_vars['shipping']->value['possible_addresses'])){?><div class="wa-possible-addresses-section" id="js-possible-addresses-section"><div class="wa-header"><span class="wa-tooltip is-inline top" data-title="Required field">Please specify the address<span class="wa-required"></span></span></div><div class="wa-dropdown full-line js-possible-address-select"><div class="wa-dropdown-toggle"><?php if (isset($_smarty_tpl->tpl_vars['shipping']->value['selected_possible_address'])){?><?php echo $_smarty_tpl->tpl_vars['shipping']->value['selected_possible_address']['city'];?>
<?php }else{ ?>Please specify the address<?php }?></div><div class="wa-dropdown-area"><?php  $_smarty_tpl->tpl_vars['_possible_address'] = new Smarty_Variable; $_smarty_tpl->tpl_vars['_possible_address']->_loop = false;
 $_from = $_smarty_tpl->tpl_vars['shipping']->value['possible_addresses']; if (!is_array($_from) && !is_object($_from)) { settype($_from, 'array');}
 $_smarty_tpl->tpl_vars['_possible_address']->index=-1;
foreach ($_from as $_smarty_tpl->tpl_vars['_possible_address']->key => $_smarty_tpl->tpl_vars['_possible_address']->value){
$_smarty_tpl->tpl_vars['_possible_address']->_loop = true;
 $_smarty_tpl->tpl_vars['_possible_address']->index++;
?><div class="wa-dropdown-item<?php if (isset($_smarty_tpl->tpl_vars['shipping']->value['selected_possible_address']['name'])&&$_smarty_tpl->tpl_vars['_possible_address']->value['name']==$_smarty_tpl->tpl_vars['shipping']->value['selected_possible_address']['name']&&$_smarty_tpl->tpl_vars['_possible_address']->value['plugin_id']==$_smarty_tpl->tpl_vars['shipping']->value['selected_possible_address']['plugin_id']){?> is-selected<?php }?>"data-index="<?php echo $_smarty_tpl->tpl_vars['_possible_address']->index;?>
"><div class="wa-address-variant"><div class="wa-name"><?php if (!empty($_smarty_tpl->tpl_vars['_possible_address']->value['image'])){?><span class="wa-image" style="background-image: url('<?php echo htmlspecialchars($_smarty_tpl->tpl_vars['_possible_address']->value['image'], ENT_QUOTES, 'UTF-8', true);?>
');"></span><?php }?><?php echo htmlspecialchars($_smarty_tpl->tpl_vars['_possible_address']->value['name'], ENT_QUOTES, 'UTF-8', true);?>
</div></div></div><?php } ?></div></div><input type="hidden" name="region[possible_address][name]" class="js-possible-address-name" <?php if (isset($_smarty_tpl->tpl_vars['shipping']->value['selected_possible_address']['name'])){?>value="<?php echo $_smarty_tpl->tpl_vars['shipping']->value['selected_possible_address']['name'];?>
"<?php }?>><input type="hidden" name="region[possible_address][region]" class="js-possible-address-region" <?php if (isset($_smarty_tpl->tpl_vars['shipping']->value['selected_possible_address']['region'])){?>value="<?php echo $_smarty_tpl->tpl_vars['shipping']->value['selected_possible_address']['region'];?>
"<?php }?>><input type="hidden" name="region[possible_address][city]" class="js-possible-address-city" <?php if (isset($_smarty_tpl->tpl_vars['shipping']->value['selected_possible_address']['city'])){?>value="<?php echo $_smarty_tpl->tpl_vars['shipping']->value['selected_possible_address']['city'];?>
"<?php }?>><input type="hidden" name="region[possible_address][zip]" class="js-possible-address-zip" <?php if (isset($_smarty_tpl->tpl_vars['shipping']->value['selected_possible_address']['zip'])){?>value="<?php echo $_smarty_tpl->tpl_vars['shipping']->value['selected_possible_address']['zip'];?>
"<?php }?>><input type="hidden" name="region[possible_address][plugin_id]" class="js-possible-address-plugin-id" <?php if (isset($_smarty_tpl->tpl_vars['shipping']->value['selected_possible_address']['plugin_id'])){?>value="<?php echo $_smarty_tpl->tpl_vars['shipping']->value['selected_possible_address']['plugin_id'];?>
"<?php }?>></div><?php }?><?php if (empty($_smarty_tpl->tpl_vars['shipping']->value['disabled'])){?><?php if (!empty($_smarty_tpl->tpl_vars['shipping']->value['types'])){?><?php if (!empty($_smarty_tpl->tpl_vars['_is_default_mode']->value)){?><?php $_smarty_tpl->tpl_vars['_active_type'] = new Smarty_variable(null, null, 0);?><div class="wa-delivery-types-section" id="js-delivery-types-section"><div class="wa-header">Shipping types</div><div class="wa-types-list"><?php  $_smarty_tpl->tpl_vars['_type_id'] = new Smarty_Variable; $_smarty_tpl->tpl_vars['_type_id']->_loop = false;
 $_from = $_smarty_tpl->tpl_vars['_types_sort']->value; if (!is_array($_from) && !is_object($_from)) { settype($_from, 'array');}
foreach ($_from as $_smarty_tpl->tpl_vars['_type_id']->key => $_smarty_tpl->tpl_vars['_type_id']->value){
$_smarty_tpl->tpl_vars['_type_id']->_loop = true;
?><?php if (empty($_smarty_tpl->tpl_vars['shipping']->value['types'][$_smarty_tpl->tpl_vars['_type_id']->value])){?><?php continue 1?><?php }?><?php $_smarty_tpl->tpl_vars['_type'] = new Smarty_variable($_smarty_tpl->tpl_vars['shipping']->value['types'][$_smarty_tpl->tpl_vars['_type_id']->value], null, 0);?><?php $_smarty_tpl->tpl_vars['_is_active'] = new Smarty_variable(false, null, 0);?><?php if (!empty($_smarty_tpl->tpl_vars['_type']->value['is_selected'])){?><?php $_smarty_tpl->tpl_vars['_is_active'] = new Smarty_variable(true, null, 0);?><?php $_smarty_tpl->tpl_vars['_active_type'] = new Smarty_variable($_smarty_tpl->tpl_vars['_type']->value, null, 0);?><?php }?><?php $_smarty_tpl->tpl_vars['_date'] = new Smarty_variable(null, null, 0);?><?php if (!empty($_smarty_tpl->tpl_vars['_type']->value['date_formatted'])){?><?php $_smarty_tpl->tpl_vars['_date'] = new Smarty_variable($_smarty_tpl->tpl_vars['_type']->value['date_formatted'], null, 0);?><?php }?><?php $_smarty_tpl->tpl_vars['_price'] = new Smarty_variable(null, null, 0);?><?php if (isset($_smarty_tpl->tpl_vars['_type']->value['rate_min'])&&$_smarty_tpl->tpl_vars['_type']->value['rate_min']!==null){?><?php if ($_smarty_tpl->tpl_vars['_type']->value['rate_min']>0){?><?php $_smarty_tpl->tpl_vars['_price'] = new Smarty_variable(shop_currency($_smarty_tpl->tpl_vars['_type']->value['rate_min'],array('in_currency'=>$_smarty_tpl->tpl_vars['_type']->value['currency'],'format'=>'h')), null, 0);?><?php if (!(isset($_smarty_tpl->tpl_vars['_type']->value['rate_max'])&&$_smarty_tpl->tpl_vars['_type']->value['rate_min']===$_smarty_tpl->tpl_vars['_type']->value['rate_max'])){?><?php $_smarty_tpl->tpl_vars['_price'] = new Smarty_variable("from ".((string)$_smarty_tpl->tpl_vars['_price']->value), null, 0);?><?php }?><?php }elseif($_smarty_tpl->tpl_vars['_type']->value['rate_min']!==$_smarty_tpl->tpl_vars['_type']->value['rate_max']){?><?php $_smarty_tpl->tpl_vars['_price'] = new Smarty_variable(shop_currency($_smarty_tpl->tpl_vars['_type']->value['rate_min'],array('in_currency'=>$_smarty_tpl->tpl_vars['_type']->value['currency'],'format'=>'h')), null, 0);?><?php $_smarty_tpl->tpl_vars['_price'] = new Smarty_variable("from ".((string)$_smarty_tpl->tpl_vars['_price']->value), null, 0);?><?php }else{ ?><?php $_smarty_tpl->tpl_vars['_price'] = new Smarty_variable(_w("Free"), null, 0);?><?php }?><?php }?><?php if (!empty($_smarty_tpl->tpl_vars['_type']->value['variants'])){?><div class="wa-type-wrapper <?php if (!empty($_smarty_tpl->tpl_vars['_is_active']->value)){?>is-active<?php }?> <?php if (empty($_smarty_tpl->tpl_vars['_type']->value['variants'])){?>is-empty is-disabled<?php }?>" data-id="<?php echo htmlspecialchars($_smarty_tpl->tpl_vars['_type']->value['id'], ENT_QUOTES, 'UTF-8', true);?>
"><div class="wa-name"><a href="javascript:void(0);"><?php echo htmlspecialchars($_smarty_tpl->tpl_vars['_type']->value['name'], ENT_QUOTES, 'UTF-8', true);?>
</a></div><?php if (!empty($_smarty_tpl->tpl_vars['_price']->value)){?><div class="wa-price"><?php echo $_smarty_tpl->tpl_vars['_price']->value;?>
</div><?php }?><?php if (!empty($_smarty_tpl->tpl_vars['_date']->value)){?><div class="wa-date"><?php echo $_smarty_tpl->tpl_vars['_date']->value;?>
</div><?php }?></div><?php }?><?php } ?></div><input class="js-type-field" name="shipping[type_id]" type="hidden" value="<?php echo htmlspecialchars((($tmp = @$_smarty_tpl->tpl_vars['shipping']->value['selected_type_id'])===null||$tmp==='' ? '' : $tmp), ENT_QUOTES, 'UTF-8', true);?>
"></div><?php if (!empty($_smarty_tpl->tpl_vars['_active_type']->value)){?><?php $_smarty_tpl->tpl_vars['_active_variant'] = new Smarty_variable(null, null, 0);?><?php if (!empty($_smarty_tpl->tpl_vars['shipping']->value['selected_type_id'])&&!empty($_smarty_tpl->tpl_vars['_active_type']->value['variants'][$_smarty_tpl->tpl_vars['shipping']->value['selected_variant_id']])){?><?php $_smarty_tpl->tpl_vars['_active_variant'] = new Smarty_variable($_smarty_tpl->tpl_vars['_active_type']->value['variants'][$_smarty_tpl->tpl_vars['shipping']->value['selected_variant_id']], null, 0);?><?php }?><div class="wa-delivery-variants-section" id="js-delivery-variants-section"><div class="wa-header">Shipping options</div><div class="wa-dropdown full-line js-variants-select"><div class="wa-dropdown-toggle"><?php if (!empty($_smarty_tpl->tpl_vars['_active_variant']->value)){?><?php echo htmlspecialchars($_smarty_tpl->tpl_vars['_active_variant']->value['name'], ENT_QUOTES, 'UTF-8', true);?>
<?php }else{ ?>Select a shipping option<?php }?></div><div class="wa-dropdown-area"><?php  $_smarty_tpl->tpl_vars['_variant'] = new Smarty_Variable; $_smarty_tpl->tpl_vars['_variant']->_loop = false;
 $_from = $_smarty_tpl->tpl_vars['_active_type']->value['variants']; if (!is_array($_from) && !is_object($_from)) { settype($_from, 'array');}
 $_smarty_tpl->tpl_vars['_variant']->index=-1;
foreach ($_from as $_smarty_tpl->tpl_vars['_variant']->key => $_smarty_tpl->tpl_vars['_variant']->value){
$_smarty_tpl->tpl_vars['_variant']->_loop = true;
 $_smarty_tpl->tpl_vars['_variant']->index++;
 $_smarty_tpl->tpl_vars['_variant']->first = $_smarty_tpl->tpl_vars['_variant']->index === 0;
?><?php if ($_smarty_tpl->tpl_vars['_variant']->first){?><?php $_smarty_tpl->tpl_vars['_variant_first'] = new Smarty_variable(array("id"=>$_smarty_tpl->tpl_vars['_variant']->value['variant_id'],"name"=>$_smarty_tpl->tpl_vars['_variant']->value['name']), null, 0);?><?php }?><?php $_smarty_tpl->tpl_vars['_date'] = new Smarty_variable(null, null, 0);?><?php if (!empty($_smarty_tpl->tpl_vars['_variant']->value['date_locale'])){?><?php $_smarty_tpl->tpl_vars['_date'] = new Smarty_variable($_smarty_tpl->tpl_vars['_variant']->value['date_locale'], null, 0);?><?php }else{ ?><?php if (!empty($_smarty_tpl->tpl_vars['_variant']->value['date_min'])){?><?php $_smarty_tpl->tpl_vars['_date'] = new Smarty_variable(smarty_modifier_wa_datetime($_smarty_tpl->tpl_vars['_variant']->value['date_min'],'shortdate'), null, 0);?><?php $_smarty_tpl->tpl_vars['_date'] = new Smarty_variable("from ".((string)$_smarty_tpl->tpl_vars['_date']->value), null, 0);?><?php }elseif(!empty($_smarty_tpl->tpl_vars['_variant']->value['date_max'])){?><?php $_smarty_tpl->tpl_vars['_date'] = new Smarty_variable(smarty_modifier_wa_datetime($_smarty_tpl->tpl_vars['_variant']->value['date_max'],'shortdate'), null, 0);?><?php $_smarty_tpl->tpl_vars['_date'] = new Smarty_variable("to ".((string)$_smarty_tpl->tpl_vars['_date']->value), null, 0);?><?php }?><?php }?><?php $_smarty_tpl->tpl_vars['_price'] = new Smarty_variable(null, null, 0);?><?php if (isset($_smarty_tpl->tpl_vars['_variant']->value['rate_min'])&&$_smarty_tpl->tpl_vars['_variant']->value['rate_min']!==null){?><?php if ($_smarty_tpl->tpl_vars['_variant']->value['rate_min']>0){?><?php $_smarty_tpl->tpl_vars['_price'] = new Smarty_variable(shop_currency($_smarty_tpl->tpl_vars['_variant']->value['rate_min'],array('in_currency'=>$_smarty_tpl->tpl_vars['_variant']->value['currency'],'format'=>'h')), null, 0);?><?php if (!(isset($_smarty_tpl->tpl_vars['_variant']->value['rate_max'])&&$_smarty_tpl->tpl_vars['_variant']->value['rate_min']===$_smarty_tpl->tpl_vars['_variant']->value['rate_max'])){?><?php $_smarty_tpl->tpl_vars['_price'] = new Smarty_variable("from ".((string)$_smarty_tpl->tpl_vars['_price']->value), null, 0);?><?php }?><?php }else{ ?><?php $_smarty_tpl->tpl_vars['_price'] = new Smarty_variable(_w("Free"), null, 0);?><?php }?><?php }?><?php if (!empty($_smarty_tpl->tpl_vars['_variant']->value['variant_id'])){?><?php if ($_smarty_tpl->tpl_vars['_map_display']->value!=="always"&&$_smarty_tpl->tpl_vars['_map_display']->value!=="desktop"&&!($_smarty_tpl->tpl_vars['_active_type']->value['id']==="pickup"&&count($_smarty_tpl->tpl_vars['_active_type']->value['variants'])>5)){?><div class="wa-dropdown-item js-set-dropdown-item" data-id="<?php echo htmlspecialchars($_smarty_tpl->tpl_vars['_variant']->value['variant_id'], ENT_QUOTES, 'UTF-8', true);?>
"><div class="wa-delivery-variant"><div class="wa-name" data-name="<?php echo htmlspecialchars($_smarty_tpl->tpl_vars['_variant']->value['name'], ENT_QUOTES, 'UTF-8', true);?>
"><?php echo htmlspecialchars($_smarty_tpl->tpl_vars['_variant']->value['name'], ENT_QUOTES, 'UTF-8', true);?>
</div><?php if (!empty($_smarty_tpl->tpl_vars['_price']->value)){?><span class="wa-price"><?php echo $_smarty_tpl->tpl_vars['_price']->value;?>
</span><?php }?><?php if (!empty($_smarty_tpl->tpl_vars['_date']->value)){?><span class="wa-date"><?php echo $_smarty_tpl->tpl_vars['_date']->value;?>
</span><?php }?><?php if (!empty($_smarty_tpl->tpl_vars['_variant']->value['service'])){?><span class="wa-service"><?php echo htmlspecialchars($_smarty_tpl->tpl_vars['_variant']->value['service'], ENT_QUOTES, 'UTF-8', true);?>
</span><?php }?></div></div><?php }?><?php $_smarty_tpl->tpl_vars['_variants_count'] = new Smarty_variable($_smarty_tpl->tpl_vars['_variants_count']->value+1, null, 0);?><?php }?><?php } ?></div></div><input class="js-variant-field" name="shipping[variant_id]" type="hidden" value="<?php echo htmlspecialchars((($tmp = @$_smarty_tpl->tpl_vars['shipping']->value['selected_variant_id'])===null||$tmp==='' ? '' : $tmp), ENT_QUOTES, 'UTF-8', true);?>
"></div><?php }else{ ?><?php if (!empty($_smarty_tpl->tpl_vars['_active_variant']->value)){?><?php $_smarty_tpl->tpl_vars['_error_text'] = new Smarty_variable("There are no shipping options available for specified location.<br>Please check values in location fields or contact us.", null, 0);?><?php }?><?php }?><?php }elseif(!empty($_smarty_tpl->tpl_vars['_is_minimal_mode']->value)){?><?php $_smarty_tpl->tpl_vars['_active_type'] = new Smarty_variable(null, null, 0);?><?php $_smarty_tpl->tpl_vars['_active_variant'] = new Smarty_variable(null, null, 0);?><?php $_smarty_tpl->tpl_vars['_variants'] = new Smarty_variable(array(), null, 0);?><?php  $_smarty_tpl->tpl_vars['_type_id'] = new Smarty_Variable; $_smarty_tpl->tpl_vars['_type_id']->_loop = false;
 $_from = $_smarty_tpl->tpl_vars['_types_sort']->value; if (!is_array($_from) && !is_object($_from)) { settype($_from, 'array');}
foreach ($_from as $_smarty_tpl->tpl_vars['_type_id']->key => $_smarty_tpl->tpl_vars['_type_id']->value){
$_smarty_tpl->tpl_vars['_type_id']->_loop = true;
?><?php if (empty($_smarty_tpl->tpl_vars['shipping']->value['types'][$_smarty_tpl->tpl_vars['_type_id']->value])){?><?php continue 1?><?php }?><?php $_smarty_tpl->tpl_vars['_type'] = new Smarty_variable($_smarty_tpl->tpl_vars['shipping']->value['types'][$_smarty_tpl->tpl_vars['_type_id']->value], null, 0);?><?php $_smarty_tpl->tpl_vars['_is_active_type'] = new Smarty_variable(!empty($_smarty_tpl->tpl_vars['_type']->value['is_selected']), null, 0);?><?php if (!empty($_smarty_tpl->tpl_vars['_is_active_type']->value)){?><?php $_smarty_tpl->tpl_vars['_active_type'] = new Smarty_variable($_smarty_tpl->tpl_vars['_type']->value, null, 0);?><?php }?><?php  $_smarty_tpl->tpl_vars['_variant'] = new Smarty_Variable; $_smarty_tpl->tpl_vars['_variant']->_loop = false;
 $_from = $_smarty_tpl->tpl_vars['_type']->value['variants']; if (!is_array($_from) && !is_object($_from)) { settype($_from, 'array');}
 $_smarty_tpl->tpl_vars['_variant']->index=-1;
foreach ($_from as $_smarty_tpl->tpl_vars['_variant']->key => $_smarty_tpl->tpl_vars['_variant']->value){
$_smarty_tpl->tpl_vars['_variant']->_loop = true;
 $_smarty_tpl->tpl_vars['_variant']->index++;
 $_smarty_tpl->tpl_vars['_variant']->first = $_smarty_tpl->tpl_vars['_variant']->index === 0;
?><?php if (!empty($_smarty_tpl->tpl_vars['_is_active_type']->value)&&!empty($_smarty_tpl->tpl_vars['shipping']->value['selected_variant_id'])&&$_smarty_tpl->tpl_vars['shipping']->value['selected_variant_id']===$_smarty_tpl->tpl_vars['_variant']->value['variant_id']){?><?php $_smarty_tpl->tpl_vars['_active_variant'] = new Smarty_variable($_smarty_tpl->tpl_vars['_variant']->value, null, 0);?><?php }?><?php $_smarty_tpl->createLocalArrayVariable('_variants', null, 0);
$_smarty_tpl->tpl_vars['_variants']->value[] = $_smarty_tpl->tpl_vars['_variant']->value;?><?php } ?><?php } ?><div class="wa-delivery-variants-section" id="js-delivery-short-variants-section"><div class="wa-header">Shipping options</div><div class="wa-dropdown full-line js-variants-select"><div class="wa-dropdown-toggle"><?php if (!empty($_smarty_tpl->tpl_vars['_active_variant']->value)){?><?php echo htmlspecialchars($_smarty_tpl->tpl_vars['_active_variant']->value['name'], ENT_QUOTES, 'UTF-8', true);?>
<?php }else{ ?>Select a shipping option<?php }?></div><div class="wa-dropdown-area"><?php  $_smarty_tpl->tpl_vars['_variant'] = new Smarty_Variable; $_smarty_tpl->tpl_vars['_variant']->_loop = false;
 $_from = $_smarty_tpl->tpl_vars['_variants']->value; if (!is_array($_from) && !is_object($_from)) { settype($_from, 'array');}
 $_smarty_tpl->tpl_vars['_variant']->index=-1;
foreach ($_from as $_smarty_tpl->tpl_vars['_variant']->key => $_smarty_tpl->tpl_vars['_variant']->value){
$_smarty_tpl->tpl_vars['_variant']->_loop = true;
 $_smarty_tpl->tpl_vars['_variant']->index++;
 $_smarty_tpl->tpl_vars['_variant']->first = $_smarty_tpl->tpl_vars['_variant']->index === 0;
?><?php if ($_smarty_tpl->tpl_vars['_variant']->first){?><?php $_smarty_tpl->tpl_vars['_variant_first'] = new Smarty_variable(array("id"=>$_smarty_tpl->tpl_vars['_variant']->value['variant_id'],"name"=>$_smarty_tpl->tpl_vars['_variant']->value['name']), null, 0);?><?php }?><?php $_smarty_tpl->tpl_vars['_date'] = new Smarty_variable(null, null, 0);?><?php if (!empty($_smarty_tpl->tpl_vars['_variant']->value['date_locale'])){?><?php $_smarty_tpl->tpl_vars['_date'] = new Smarty_variable($_smarty_tpl->tpl_vars['_variant']->value['date_locale'], null, 0);?><?php }else{ ?><?php if (!empty($_smarty_tpl->tpl_vars['_variant']->value['date_min'])){?><?php $_smarty_tpl->tpl_vars['_date'] = new Smarty_variable(smarty_modifier_wa_datetime($_smarty_tpl->tpl_vars['_variant']->value['date_min'],'shortdate'), null, 0);?><?php $_smarty_tpl->tpl_vars['_date'] = new Smarty_variable("from ".((string)$_smarty_tpl->tpl_vars['_date']->value), null, 0);?><?php }elseif(!empty($_smarty_tpl->tpl_vars['_variant']->value['date_max'])){?><?php $_smarty_tpl->tpl_vars['_date'] = new Smarty_variable(smarty_modifier_wa_datetime($_smarty_tpl->tpl_vars['_variant']->value['date_max'],'shortdate'), null, 0);?><?php $_smarty_tpl->tpl_vars['_date'] = new Smarty_variable("to ".((string)$_smarty_tpl->tpl_vars['_date']->value), null, 0);?><?php }?><?php }?><?php $_smarty_tpl->tpl_vars['_price'] = new Smarty_variable(null, null, 0);?><?php if (isset($_smarty_tpl->tpl_vars['_variant']->value['rate_min'])&&$_smarty_tpl->tpl_vars['_variant']->value['rate_min']!==null){?><?php if ($_smarty_tpl->tpl_vars['_variant']->value['rate_min']>0){?><?php $_smarty_tpl->tpl_vars['_price'] = new Smarty_variable(shop_currency($_smarty_tpl->tpl_vars['_variant']->value['rate_min'],array('in_currency'=>$_smarty_tpl->tpl_vars['_variant']->value['currency'],'format'=>'h')), null, 0);?><?php if (!(isset($_smarty_tpl->tpl_vars['_variant']->value['rate_max'])&&$_smarty_tpl->tpl_vars['_variant']->value['rate_min']===$_smarty_tpl->tpl_vars['_variant']->value['rate_max'])){?><?php $_smarty_tpl->tpl_vars['_price'] = new Smarty_variable("from ".((string)$_smarty_tpl->tpl_vars['_price']->value), null, 0);?><?php }?><?php }else{ ?><?php $_smarty_tpl->tpl_vars['_price'] = new Smarty_variable(_w("Free"), null, 0);?><?php }?><?php }?><?php if (!empty($_smarty_tpl->tpl_vars['_variant']->value['variant_id'])){?><div class="wa-dropdown-item js-set-dropdown-item" data-variant-id="<?php echo htmlspecialchars($_smarty_tpl->tpl_vars['_variant']->value['variant_id'], ENT_QUOTES, 'UTF-8', true);?>
" data-type-id="<?php echo htmlspecialchars($_smarty_tpl->tpl_vars['_variant']->value['type'], ENT_QUOTES, 'UTF-8', true);?>
"><div class="wa-delivery-variant"><div class="wa-name" data-name="<?php echo htmlspecialchars($_smarty_tpl->tpl_vars['_variant']->value['name'], ENT_QUOTES, 'UTF-8', true);?>
"><?php echo htmlspecialchars($_smarty_tpl->tpl_vars['_variant']->value['name'], ENT_QUOTES, 'UTF-8', true);?>
</div><?php if (!empty($_smarty_tpl->tpl_vars['_price']->value)){?><span class="wa-price"><?php echo $_smarty_tpl->tpl_vars['_price']->value;?>
</span><?php }?><?php if (!empty($_smarty_tpl->tpl_vars['_date']->value)){?><span class="wa-date"><?php echo $_smarty_tpl->tpl_vars['_date']->value;?>
</span><?php }?><?php if (!empty($_smarty_tpl->tpl_vars['_variant']->value['service'])){?><span class="wa-service"><?php echo htmlspecialchars($_smarty_tpl->tpl_vars['_variant']->value['service'], ENT_QUOTES, 'UTF-8', true);?>
</span><?php }?></div></div><?php $_smarty_tpl->tpl_vars['_variants_count'] = new Smarty_variable($_smarty_tpl->tpl_vars['_variants_count']->value+1, null, 0);?><?php }?><?php } ?></div></div><input class="js-type-field" name="shipping[type_id]" type="hidden" value="<?php echo htmlspecialchars((($tmp = @$_smarty_tpl->tpl_vars['shipping']->value['selected_type_id'])===null||$tmp==='' ? '' : $tmp), ENT_QUOTES, 'UTF-8', true);?>
"><input class="js-variant-field" name="shipping[variant_id]" type="hidden" value="<?php echo htmlspecialchars((($tmp = @$_smarty_tpl->tpl_vars['shipping']->value['selected_variant_id'])===null||$tmp==='' ? '' : $tmp), ENT_QUOTES, 'UTF-8', true);?>
"></div><?php }?><?php }elseif(empty($_smarty_tpl->tpl_vars['_is_fast_render']->value)){?><?php $_smarty_tpl->tpl_vars['_error_text'] = new Smarty_variable("There are no shipping options available for specified location.<br>Please check values in location fields or contact us.", null, 0);?><?php }?><?php if (!empty($_smarty_tpl->tpl_vars['_error_text']->value)){?><div class="wa-errors-wrapper"><div class="wa-error-text"><?php echo $_smarty_tpl->tpl_vars['_error_text']->value;?>
</div></div><?php }?><?php  $_smarty_tpl->tpl_vars['_'] = new Smarty_Variable; $_smarty_tpl->tpl_vars['_']->_loop = false;
 $_from = $_smarty_tpl->tpl_vars['event_hook']->value['shipping']; if (!is_array($_from) && !is_object($_from)) { settype($_from, 'array');}
foreach ($_from as $_smarty_tpl->tpl_vars['_']->key => $_smarty_tpl->tpl_vars['_']->value){
$_smarty_tpl->tpl_vars['_']->_loop = true;
?><div class="wa-plugin-hook"><?php echo $_smarty_tpl->tpl_vars['_']->value;?>
</div><?php } ?><?php }?></form></div><?php $_smarty_tpl->tpl_vars['_map'] = new Smarty_variable(array("display"=>$_smarty_tpl->tpl_vars['_map_display']->value,"adapter"=>null,"api_uri"=>null), null, 0);?><?php if (!empty($_smarty_tpl->tpl_vars['shipping']->value['map']['adapter'])){?><?php $_smarty_tpl->createLocalArrayVariable('_map', null, 0);
$_smarty_tpl->tpl_vars['_map']->value["adapter"] = $_smarty_tpl->tpl_vars['shipping']->value['map']['adapter'];?><?php if ($_smarty_tpl->tpl_vars['shipping']->value['map']['adapter']==="yandex"){?><?php $_smarty_tpl->tpl_vars['_api_uri'] = new Smarty_variable("//api-maps.yandex.ru/2.1/?lang=ru_RU&load=Geolink,Map,Placemark,Clusterer,Collection,geoObject.addon.balloon,control.FullscreenControl,control.GeolocationControl,control.SearchControl,control.ZoomControl", null, 0);?><?php if (!empty($_smarty_tpl->tpl_vars['shipping']->value['map']['api_key'])){?><?php $_smarty_tpl->tpl_vars['_api_uri'] = new Smarty_variable(((string)$_smarty_tpl->tpl_vars['_api_uri']->value)."&apikey=".((string)$_smarty_tpl->tpl_vars['shipping']->value['map']['api_key']), null, 0);?><?php }?><?php $_smarty_tpl->createLocalArrayVariable('_map', null, 0);
$_smarty_tpl->tpl_vars['_map']->value["api_uri"] = $_smarty_tpl->tpl_vars['_api_uri']->value;?><?php }?><?php if ($_smarty_tpl->tpl_vars['shipping']->value['map']['adapter']==="google"){?><?php $_smarty_tpl->tpl_vars['_api_uri'] = new Smarty_variable("//maps.googleapis.com/maps/api/js", null, 0);?><?php if (!empty($_smarty_tpl->tpl_vars['shipping']->value['map']['api_key'])){?><?php $_smarty_tpl->tpl_vars['_api_uri'] = new Smarty_variable(((string)$_smarty_tpl->tpl_vars['_api_uri']->value)."?key=".((string)$_smarty_tpl->tpl_vars['shipping']->value['map']['api_key']), null, 0);?><?php }?><?php $_smarty_tpl->createLocalArrayVariable('_map', null, 0);
$_smarty_tpl->tpl_vars['_map']->value["api_uri"] = $_smarty_tpl->tpl_vars['_api_uri']->value;?><?php }?><?php }?><script>( function($) {var $section = $("#wa-step-shipping-section"),$wrapper = $("#wa-order-form-wrapper");var ready_promise = $wrapper.data("ready").promise();ready_promise.then(function (controller) {var errors = <?php echo json_encode($_smarty_tpl->tpl_vars['_errors']->value);?>
;var error  = (Array.isArray(errors) ? errors.shift() : []);controller.initShipping({$wrapper: $section,map: <?php echo json_encode($_smarty_tpl->tpl_vars['_map']->value);?>
,variant_first: <?php echo json_encode($_smarty_tpl->tpl_vars['_variant_first']->value);?>
,variants_count: <?php echo htmlspecialchars($_smarty_tpl->tpl_vars['_variants_count']->value, ENT_QUOTES, 'UTF-8', true);?>
,disabled: <?php if (!empty($_smarty_tpl->tpl_vars['shipping']->value['disabled'])){?>true<?php }else{ ?>false<?php }?>,errors: <?php echo json_encode($_smarty_tpl->tpl_vars['_errors']->value);?>
,possible_addresses: <?php echo json_encode((($tmp = @$_smarty_tpl->tpl_vars['shipping']->value['possible_addresses'])===null||$tmp==='' ? array() : $tmp));?>
,urls: {variants_dialog: <?php echo json_encode($_smarty_tpl->tpl_vars['wa']->value->getUrl('shop/frontendOrder/shippingDialog'));?>
},locales: {type_required: <?php echo json_encode(_w("Select a shipping type."));?>
,variant_required: <?php echo json_encode(_w("Select a shipping option."));?>
}});<?php if (!empty($_smarty_tpl->tpl_vars['_is_fast_render']->value)){?>$wrapper.one("confirm_initialized", function() {controller.update({data: [{name: "use_session_input",value: "1"}]});});<?php }?>});})(jQuery);</script></section>
<?php }} ?>